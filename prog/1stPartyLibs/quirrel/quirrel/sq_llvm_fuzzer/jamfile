Root    ?= ../../../../.. ;
Location = prog/1stPartyLibs/quirrel/quirrel/sq_llvm_fuzzer ;
ConsoleExe = yes ;

StrictCompile ?= yes ;

Fuzzer      = yes ;

TargetType  = exe ;
Target      = 1stPartyLibs/quirrel/sq ;
OutDir      = $(Root)/tools/util ;

if $(Config) = rel
{
  PlatformSpec ?= clang ;
  MemLib ?= memory/mimallocMem ;
}

if $(Config) = rel { ForceLogs = yes ; }

include $(Root)/prog/tools/tools_setup.jam ;
include $(Root)/prog/_jBuild/defaults.jam ;

Sources =
  sq.cpp
;

AddIncludes =
  $(Root)/prog/1stPartyLibs/quirrel/quirrel/sqmodules
  $(Root)/prog/1stPartyLibs/quirrel/quirrel/include
  $(Root)/prog/1stPartyLibs/quirrel/quirrel
;

UseProgLibs =
  engine/osApiWrappers
  engine/kernel
  engine/baseUtil
  engine/startup
  engine/ioSys
  engine/math
  engine/perfMon/daProfilerStub

  1stPartyLibs/quirrel/quirrel
  1stPartyLibs/quirrel/quirrel/sqmodules
;

if $(MemLib) { UseProgLibs += engine/$(MemLib) ; } else { UseProgLibs += engine/memory ; }
if $(Platform) = linux { UseProgLibs += engine/osApiWrappers/messageBox/stub ; }

Copt = $(CPPopt) ;

ForcePdb = yes ;

include $(Root)/prog/_jBuild/build.jam ;
