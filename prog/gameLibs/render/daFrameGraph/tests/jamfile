Root    ?= ../../../../.. ;
StrictCompile = yes ;
ConsoleExe = yes ;
PlatformSpec_windows_x86_64 = clang ;
CheckedContainers ?= yes ;

include $(Root)/prog/_jBuild/defaults.jam ;

Location = prog/gameLibs/render/daFrameGraph/tests ;

TargetType  = exe ;
OutDir      = $(Root)/$(Location)/bin/$(LegacyPlatformSuffix) ;
Target      = testFrameGraph ;

if $(PlatformSpec) = clang
{
  # These warnings are enabled by default on some systems and are
  # caught by BS but not while developing. Manually enabling them saves
  # BS' and my time.
  CPPopt +=
    -Wc++11-narrowing
    -Wswitch
    -Wbitfield-constant-conversion
    -Wmissing-field-initializers
  ;
}

UseProgLibs =
  engine/memory
  engine/kernel
  engine/osApiWrappers
  engine/baseUtil
  engine/ioSys
  engine/math
  engine/drv/drv3d_stub
  engine/shaders
  engine/lib3d
  engine/image
  engine/startup

  3rdPartyLibs/eastl
  3rdPartyLibs/catch2

  engine/perfMon/daProfilerStub
  engine/perfMon/perfTimerStub
  gameLibs/render/daFrameGraph
;

ShaderVarsStub ?= yes ;

AddIncludes =
  $(Root)/$(Location)/..
  $(Root)/prog/gameLibs/publicInclude
  $(Root)/prog/3rdPartyLibs/catch2/src
;

Sources =
  main.cpp
  packer.cpp
  performance.cpp
  runtime.cpp
;

include $(Root)/prog/_jBuild/build.jam ;
